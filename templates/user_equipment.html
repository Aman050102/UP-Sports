{% load static %}
<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- Title -->
    <title>UP-FMS ยืม-คืนอุปกรณ์กีฬา</title>

    <!-- Favicon -->
    <link rel="icon"
          href="{% static 'img/Logo_of_University_of_Phayao.svg.png' %}"
          type="image/png" />

    <!-- Stylesheet -->
    <link rel="stylesheet" href="{% static 'assets/css/global.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/user_header.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/user_equipment.css' %}" />

    <!-- JavaScript -->
    <script defer src="{% static 'js/user_equipment.js' %}"></script>
    <script defer src="{% static 'js/CheckOut.js' %}"></script>
  </head>

  <body data-page="equipment">
    <!-- ===== Header ===== -->
    <header class="topbar">
      <div class="brand">
        <img src="{% static 'img/logoDSASMART.png' %}" 
             alt="DSA" class="brand-logo" />
      </div>

      <nav class="mainmenu" aria-label="เมนูหลัก">
        <ul>
          <li><a class="toplink" href="{% url 'user_menu' %}">หน้าหลัก</a></li>
          <li class="has-sub">
            <a href="#" class="toplink">
              บริการ
              <svg class="caret" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/>
              </svg>
            </a>
            <ul class="submenu" role="menu">
              <li><a role="menuitem" href="{% url 'choose' %}">เช็คอินเข้าสนาม</a></li>
              <li><a role="menuitem" id="menu-open-checkout">Check out (เฉพาะผู้ใช้สระ)</a></li>
              <li><a role="menuitem" href="{% url 'user_equipment' %}">ยืม-คืนอุปกรณ์กีฬา</a></li>
              <li><a role="menuitem" href="{% url 'badminton_booking' %}">จองสนามแบดมินตัน</a></li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="righttools">
        <span class="user-btn" aria-label="ผู้ใช้ปัจจุบัน">
          <svg width="18" height="18" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2"
               stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21a8 8 0 0 0-16 0" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          {{ display_name }}
        </span>
        <form action="{% url 'logout' %}" method="post" class="logout-form">
          {% csrf_token %}
          <button type="submit" class="logout" title="ออกจากระบบ">
            <svg width="18" height="18" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
              <path d="M16 17l5-5-5-5" />
              <path d="M21 12H9" />
            </svg>
            ออกจากระบบ
          </button>
        </form>
      </div>
    </header>

    <!-- ===== Main ===== -->
    <main class="wrap">
      <!-- Switch mode -->
      <div class="modebar" role="tablist" aria-label="เลือกรายการ">
        <button id="btnBorrow" class="mode active" data-mode="borrow"
                role="tab" aria-selected="true">✓ ยืมอุปกรณ์</button>
        <button id="btnReturn" class="mode" data-mode="return"
                role="tab" aria-selected="false">คืนอุปกรณ์</button>
      </div>

      <section class="grid">
        <!-- Left: form -->
        <div class="panel form-card">
          <h2 class="panel-title">อุปกรณ์</h2>
          <label class="field">
            <span class="field-label">อุปกรณ์</span>
            <div class="select-wrap">
              <select id="equipment">
                <option value="บาส">บาส</option>
                <option value="วอลเลย์บอล">วอลเลย์บอล</option>
                <option value="ฟุตบอล">ฟุตบอล</option>
                <option value="แบดมินตัน">แบดมินตัน</option>
                <option value="เชือกกระโดด">เชือกกระโดด</option>
              </select>
              <svg class="caret" viewBox="0 0 24 24"><path d="M6 9l6 6 6-6"
                  fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </div>
          </label>

          <label class="field">
            <span class="field-label">จำนวน</span>
            <div class="qty">
              <button type="button" class="qty-btn" data-delta="-1">−</button>
              <input id="qty" type="number" min="1" value="1" inputmode="numeric" />
              <button type="button" class="qty-btn" data-delta="1">+</button>
            </div>
          </label>

          <div class="actions">
            <button id="submitBtn" class="primary">ทำการยืนยัน</button>
          </div>
        </div>

        <!-- Right: stock -->
        <div class="panel stock-card">
          <div class="stock-head">
            <div>อุปกรณ์กีฬา</div><div>คงเหลือ</div>
          </div>
          <ul class="stock-list" id="stockList" aria-live="polite">
            <li><span>บาส</span><b>10</b></li>
            <li><span>วอลเลย์บอล</span><b>10</b></li>
            <li><span>ฟุตบอล</span><b>10</b></li>
            <li><span>แบดมินตัน</span><b>10</b></li>
            <li><span>เชือกกระโดด</span><b>10</b></li>
          </ul>
        </div>
      </section>

      <div class="center">
        <button id="confirmBtn" class="confirm">ทำการยืม</button>
      </div>
    </main>

    <!-- ===== Sheets ===== -->
    <div class="sheet" id="sheetBorrow" aria-hidden="true">
      <div class="sheet-card">
        <div class="sheet-title">ทำการยืม<br>เสร็จสิ้น</div>
        <div class="sheet-icon">✔</div>
      </div>
    </div>

    <div class="sheet" id="sheetReturn" aria-hidden="true">
      <div class="sheet-card">
        <div class="sheet-title">ทำการคืน<br>เสร็จสิ้น</div>
        <div class="sheet-icon">✔</div>
      </div>
    </div>
  </body>
</html>