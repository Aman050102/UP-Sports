{% load static %}
<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Title -->
    <title>UP-FMS เมนูหลักสำหรับนิสิตและบุคลากร</title>
    <meta name="color-scheme" content="light dark" />
    <meta name="description" content="เมนูหลักสำหรับนิสิตและบุคลากร" />
    <meta name="author" content="DSA SMART Team" />
    <meta
      name="keywords"
      content="UP-FMS, UP Sports, University of Phayao, Sports Facility Management System, ระบบจัดการสนามกีฬา, ระบบยืมคืนอุปกรณ์กีฬา, ระบบจองสนามกีฬา, ระบบเช็คอินสนามกีฬา, ระบบเช็คเอาท์สนามกีฬา"
    />
    <meta name="robots" content="noindex,nofollow" />

    <!-- Favicon -->
    <link
      rel="icon"
      href="{% static 'img/Logo_of_University_of_Phayao.svg.png' %}"
      type="image/png"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'assets/css/global.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/user_header.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/menu.css'%}" />
    <link rel="stylesheet" href="{% static 'assets/css/checkout.css'%}" />

    <!-- Scripts -->
    <script src="{% static 'js/CheckOut.js' %}" defer></script>
    <script src="{% static 'js/menu.js' %}" defer></script>
  </head>

  <body data-pool-locked="{% if pool_locked %}1{% else %}0{% endif %}">
    <!-- ======= ส่วนหัว ======= -->
    <header class="topbar">
      <div class="brand">
        <img
          src="{% static 'img/logoDSASMART.png' %}"
          alt="DSA"
          class="brand-logo"
        />
      </div>

      <nav class="mainmenu" aria-label="เมนูหลัก">
        <ul>
          <li><a class="toplink" href="{% url 'user_menu' %}">หน้าหลัก</a></li>

          <li class="has-sub">
            <details>
              <summary class="toplink">
                บริการ
                <svg class="caret" viewBox="0 0 24 24">
                  <path d="M6 9l6 6 6-6" />
                </svg>
              </summary>
              <ul class="submenu">
                <li><a href="{% url 'choose' %}">เช็คอินเข้าสนาม</a></li>
                <li>
                  <a href="{% url 'user_equipment' %}">ยืม-คืนอุปกรณ์กีฬา</a>
                </li>
                <li>
                  <a href="{% url 'badminton_booking' %}">จองสนามแบดมินตัน</a>
                </li>
              </ul>
            </details>
          </li>
        </ul>
      </nav>

      <div class="righttools">
        <span class="user-btn" aria-label="ผู้ใช้ปัจจุบัน">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M20 21a8 8 0 0 0-16 0" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          {{ display_name }}
        </span>

        <form action="{% url 'logout' %}" method="post" class="logout-form">
          {% csrf_token %}
          <button
            type="submit"
            class="logout"
            title="ออกจากระบบ"
            aria-label="ออกจากระบบ"
          >
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
              <path d="M16 17l5-5-5-5" />
              <path d="M21 12H9" />
            </svg>
            ออกจากระบบ
          </button>
        </form>
      </div>
    </header>

    <main>
      <div class="section-title">เมนูหลักสำหรับนิสิตและบุคลากร</div>

      <section class="grid" aria-label="เมนูด่วน">
        <!-- Check in -->
        <a class="tile" href="{% url 'choose' %}">
          <div class="tile-inner">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <!-- กรอบ/ผนัง -->
              <rect
                x="3"
                y="3"
                width="6"
                height="18"
                rx="2"
                ry="2"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <!-- ประตู (กึ่งเปิด) -->
              <path
                d="M9 5l6 2v10l-6 2V5z"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <!-- ลูกบิดประตู -->
              <circle cx="12" cy="12" r="0.8" fill="currentColor" />
              <!-- ลูกศรเข้าข้างใน -->
              <path
                d="M14 12h5m-3-2l3 2-3 2"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <b>Check in</b>
            <small>เช็คอินเข้าสนาม</small>
          </div>
        </a>

        <!-- Check out (สระว่ายน้ำ) -> เปิดป๊อปอัพ -->
        <button
          class="tile"
          type="button"
          id="btn-open-checkout"
          aria-haspopup="dialog"
          aria-controls="checkout-modal"
        >
          <div class="tile-inner">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <!-- คลื่นน้ำ -->
              <path
                d="M3 16c2-2 4-2 6 0s4 2 6 0 4-2 6 0"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M3 19c2-2 4-2 6 0s4 2 6 0 4-2 6 0"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                opacity=".85"
              />
              <!-- ไอคอนออกจากสระ: กรอบ/ประตูเล็ก + ลูกศรออก -->
              <rect
                x="4"
                y="4"
                width="6"
                height="6"
                rx="1.5"
                ry="1.5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M10 7h7"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M15 5l3 2-3 2"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <b>Check out</b>
            <small>เฉพาะผู้ใช้สระ</small>
          </div>
        </button>

        <!-- ยืม-คืนอุปกรณ์ -->
        <a class="tile" href="{% url 'user_equipment' %}">
          <div class="tile-inner">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <!-- บอล -->
              <circle
                cx="8"
                cy="9"
                r="4"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M6 7.5a4 4 0 0 0 4 3.5M6 10.5A4 4 0 0 1 10 7"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                opacity=".9"
              />
              <!-- ลูกขนไก่ -->
              <path
                d="M14 14l5 5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M14 14l1.4-3.6M16 15.9l1.6-3.3M17.9 17.9l1.6-2.8"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <circle cx="19.2" cy="19.2" r="1.4" fill="currentColor" />
            </svg>
            <b>ยืม-คืน อุปกรณ์กีฬา</b>
            <small>บาส · ฟุตบอล · แบดมินตัน</small>
          </div>
        </a>

        <!-- จองสนามแบดมินตัน -->
        <a class="tile" href="{% url 'badminton_booking' %}">
          <div class="tile-inner">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <!-- ปฏิทิน -->
              <rect
                x="3"
                y="5"
                width="18"
                height="16"
                rx="2"
                ry="2"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M3 9h18"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M8 3v4M16 3v4"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <!-- ลูกขนไก่ (มุมขวาล่างของปฏิทิน) -->
              <path
                d="M14.5 14.5l3.5 3.5"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <path
                d="M14.5 14.5l.9-2.4M16.7 16.7l1.0-2.0M18 18l.9-1.6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
              />
              <circle cx="18.2" cy="18.2" r="1.2" fill="currentColor" />
            </svg>
            <b>จองสนามแบดมินตัน</b>
            <small>เลือกคอร์ท</small>
          </div>
        </a>
      </section>
    </main>

    <!-- ===== Modal ยืนยัน Check out ===== -->
    <div
      class="modal-backdrop"
      id="checkout-modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
      aria-labelledby="checkout-title"
    >
      <div class="modal-card">
        <h2 class="modal-title" id="checkout-title">check out</h2>
        <p class="modal-text">
          โปรดยืนยันการ check out<br />เพื่อออกจากสระว่ายน้ำ
        </p>

        <div class="modal-actions">
          <button type="button" class="btn btn-ok" id="btn-confirm">
            <!-- ✔ -->
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle
                cx="12"
                cy="12"
                r="9"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M8 12l3 3 5-6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
            ตกลง
          </button>
          <button type="button" class="btn btn-cancel" id="btn-cancel">
            <!-- ✖ -->
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle
                cx="12"
                cy="12"
                r="9"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M9 9l6 6M15 9l-6 6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
            ยกเลิก
          </button>
        </div>
      </div>
    </div>

    <!-- ===== แผ่นการ์ด “สำเร็จ” ===== -->
    <div class="sheet-ok" id="sheet-ok" aria-hidden="true">
      <div class="sheet-card">
        <div class="sheet-title">check out<br />สำเร็จ</div>
        <div class="sheet-icon">✔️</div>
      </div>
    </div>
  </body>
</html>
